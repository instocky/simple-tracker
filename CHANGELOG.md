# Changelog

Все значимые изменения в этом проекте будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added

- Веб-дашборд для просмотра статистики проектов (Stages 1-4 completed)
  - Backend API на Flask с CORS поддержкой
  - API endpoints: /api/projects, /api/active, /api/analytics, /api/timeline
  - Команда `tracker web` с параметрами --port, --host, --daemon
  - Автоматическая установка Flask в виртуальное окружение
  - Seamless интеграция с project_manager.py
- Полноценный frontend интерфейс (Stage 3 completed)
  - HTML/CSS/JS дашборд с управлением проектами
  - Адаптивный дизайн для всех устройств
  - TimeTrackerAPI для взаимодействия с бэкендом
  - NotificationManager для уведомлений
- Сортировка и UX улучшения (Stage 4 completed)
  - Автоматическая сортировка: активные проекты первыми, затем по aggregated_minutes
  - Auto-refresh каждые 30 секунд
  - Выравнивание высоты панелей "Управление проектами" и "Аналитика"
  - Полная адаптивность (планшеты 1200px, мобильные 768px, маленькие экраны 480px)

### Fixed

- Исправлены критические JavaScript ошибки в веб-дашборде (2025-11-24)
  - Устранена синтаксическая ошибка в api-client.js (строка 389)
  - Исправлена ошибка `ReferenceError: TimeTrackerAPI is not defined`
  - Исправлена ошибка `Identifier 'Dashboard' has already been declared`
  - Удален дублированный HTML код в index.html
  - Веб-дашборд теперь корректно отображает карточки проектов, графики и временную шкалу
  - Устранены все ошибки консоли браузера

### Technical Details

- Создан файл web_server.py с Flask приложением
- Добавлена команда 'web' в project_manager.py (lines 726-785)
- Поддержка параметров: --port, --host, --daemon, --help
- Обработка ошибок и валидация входных параметров
- Запуск через subprocess с передачей параметров в web_server.py

## [0.5.1] - 2025-06-16

### Added

- Добавлено опциональное поле `description` для проектов
- Поле `description` автоматически добавляется при создании новых проектов
- Обратная совместимость: старые проекты без поля `description` продолжают работать
- Функция `ensure_project_fields()` теперь добавляет пустое описание для старых проектов

### Changed

- Обновлена структура проекта в `db.json` и `db.example.json`
- Функция создания проектов `create_project()` теперь включает поле `description`
- Модуль совместимости обновлен для поддержки нового поля

### Technical Details

- Поле `description` размещено после `total_minutes` и перед `daily_masks`
- По умолчанию значение поля: `""` (пустая строка)
- Поле не является обязательным при валидации БД
- Изменения затрагивают файлы:
  - `db.json` - добавлено поле во все существующие проекты
  - `db.example.json` - обновлен примерный формат
  - `project_manager.py` - функция `create_project()`
  - `core/compatibility.py` - функции `ensure_project_fields()` и `check_migration_status()`

---

## Соглашения о версионировании

- **MAJOR** версия увеличивается при несовместимых изменениях API
- **MINOR** версия увеличивается при добавлении функциональности с обратной совместимостью
- **PATCH** версия увеличивается при исправлении ошибок с обратной совместимостью

## Типы изменений

- **Added** - новые возможности
- **Changed** - изменения в существующей функциональности
- **Deprecated** - функциональность, которая будет удалена в будущих версиях
- **Removed** - удаленная функциональность
- **Fixed** - исправления ошибок
- **Security** - изменения, связанные с безопасностью
